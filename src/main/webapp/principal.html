<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Maestrino</title>
	<!-- PROJETO <link href="css/login.css" rel="stylesheet" /> -->
	<!-- LOCAL <link href="../resources/static/css/login.css" rel="stylesheet" /> -->
	<link href="css/principal.css" rel="stylesheet" />
	<link href='https://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet'>
</head>
<body>

	<nav class="navbar">
			<ul class="navbar-nav">
				<li class="logo">
					<!-- testar href apnes com /principal-->
					<form th:action="@{/principal}" method="post">
						<button type="submit" class="nav-link">
							<span class="link-text" th:text="${#authentication.getPrincipal().getUsername()}">MAESTRINO</span>
							<img th:src="'images/photos/' + ${#authentication.getPrincipal().getUsername()} + '.png'"> 
						</button>
					</form>
					
				</li>

				<li class="nav-item">
					<!--precisa receber uma verificação se tem ou nao usuario cadastrado, se tiver, tem que abrir a tela de cadastro se não, abrir a tela do perfil-->
					<!-- 
					<div id="sobre"><a th:href="@{/perfil/{tipoUsuario}/{nome}(tipoUsuario=${usuario.tipoUsuario}, nome=${usuario.nome})}">Sobre</a></div>
					
					<a th:href="@{/editar/{tipoUsuario}/{nome}(tipoUsuario=${#authentication.getPrincipal().getTipoUsuario()}, nome=${#authentication.getPrincipal().getUsername()}}" class="nav-link">
						<img src="images/edit.png">
						<span class="link-text" id="username">Editar perfil</span>
					</a> 
					
					-->
					<!-- 
					
					 -->
					<form th:action="@{'/editar/' + ${#authentication.getPrincipal().getTipoUsuario()} + '/' + ${#authentication.getPrincipal().getUsername()}}" method="post">
						<button type="submit" class="nav-link">
							<img src="images/edit.png">
							<span class="link-text">Editar perfil</span>
						</button>
					</form>
					 
				</li>

				<li class="nav-item">
					<!-- <a href="/maestrino-0.0.1-SNAPSHOT/login" class="nav-link">
						<img src="images/logout.png">
						<span class="link-text">Logout</span>
					</a> -->
					<form th:action="@{/logout}" method="post">
						<button type="submit" class="nav-link">
							<img src="images/logout.png">
							<span class="link-text">Logout</span>
						</button>
					</form>
				</li>
				
				<li class="nav-item">
					<a href="/maestrino-0.0.1-SNAPSHOT/sobre" class="nav-link">
						<img src="images/sobre.png">
						<span class="link-text">Sobre</span>
					</a>
				</li>
				
			</ul>
			
			
	</nav>

	<main>
		<div id="caixa">
			<!-- ainda tentando entender a melhor pratica pra esse campo de pesquisa-->
			
			<!-- 
				pesquisa basica padrao
				
			<form action="/maestrino-0.0.1-SNAPSHOT/pesquisa" method="post">
				<div id="pesquisa">
					<img src="images/lupa.png">
					<input id="buscar" type="text" name="pesquisa" placeholder="buscar" />
				</div>
			</form>
			
			
			 -->
			<!-- teste com paranetros ***terminar de implementar apos outros itens do usuario estarem prontos -->
			<form action="/maestrino-0.0.1-SNAPSHOT/pesquisa" method="post">
				<div id="pesquisa">
					<!-- passar o texto da pesquisa para a consulta -->
					<img src="images/lupa.png">
					<input id="buscar" type="text" name="pesquisa" onclick="pesquisaAvancada()" placeholder="buscar" />
					<div id="pesquisaAvancada" style='display: none;'>
						<input id="tipoEstudio" type="checkbox" name="tipo" value="tipoEstudio">
						<label for="tipoEstudio">Estudio</label>
					</div>
				</div>
			</form>
				
			<div id="filtro_Principal">
				
					<!--<a href="/maestrino-0.0.1-SNAPSHOT/principalEstudio">
						<p>Estudio</p>
					</a> -->
				<form th:action="@{/Estudios}" method="post" id="form-estudio">
					<button type="submit" class="filtro">
						<div id="filtro_Estudio">
							<p>Estudios</p>
						</div>
					</button>
				</form>
				<form th:action="@{/Luthiers}" method="post" id="form-luthier">
					<button type="submit" class="filtro">
					<div id="filtro_Luthier">
						<p>Luthiers</p>
					</div>
					</button>
				</form>			
			</div>

			<div id="listausuarios" th:each="usuario : ${usuarios}">
					<div id="imgCover">
						<img id="img" th:src="${usuario.fotoPerfil}">
					</div>
					<div id="nome" th:text="${usuario.nome}"></div>			
					<div id="tipoUsuario" th:text="${usuario.tipoUsuario}"></div>					
					<span id="descricao" th:text="${usuario.descricao}"></span>			
					<span id="nota"></span> 
					<div id="sobre"><a th:href="@{/perfil/{tipoUsuario}/{nome}(tipoUsuario=${usuario.tipoUsuario}, nome=${usuario.nome})}">Sobre</a></div>
					<!-- <div id="sobre"><a th:href="@{/perfil/{tipoUsuario}(tipoUsuario=${usuario.tipoUsuario})}">Sobre</a></div> -->
			</div>
		</div>
	</main>
	
	<script type="text/javascript">
		function pesquisaAvancada() {
			var x = document.getElementById("pesquisaAvancada");
			  if (x.style.display === "none") {
			    x.style.display = "block";
			  } else {
			    x.style.display = "none";
			  }
		}
	</script>
	
<!-- SCRIPT PRA PEGAR O URL ----- TEM QUE CORRIGIR AINDA-->
	<!-- 
	<script type="text/javascript">
			function perfilUrl() {
			var htmlId = document.getElementById("idUsuario").value;
			alert("valor: " + idid);
			var htmlPerfil = "perfilwww?User=" + htmlId;
			document.getElementById("form").action = htmlPerfil;  
		}
	</script> 
	 -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

</body>
</html>